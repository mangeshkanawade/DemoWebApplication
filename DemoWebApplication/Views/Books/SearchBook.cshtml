@model DemoWebApplication.Models.BooksViewModel
@{
    ViewBag.Title = "SearchBook";
}
<head>
    <script src="~/Scripts/jquery-3.6.0.js"></script>
</head>
<h2>SearchBook</h2>

<label class="text-success">
    Select Search Criteria for Find Books
</label>
<div class="container">
    <form id="searchForm" class="form-inline" method="post">
        @{
            @Html.TextBoxFor(
            model => model.BookName,
            null,
            new { @class = "form-control", @placeholder = "Enter Book Name " })

            @Html.DropDownListFor(
            model => model.BookCategoryId,
            new SelectList(Model.BooksCategoriesList, "BookCategoryId", "BookCategoryName"),
            "Select Cateogry",
            new { @class = "form-control" })

            @Html.DropDownListFor(
            model => model.BookPublisherId,
            new SelectList(Model.BooksPublicationsList, "BookPublisherId", "BookPublisherName"),
            "Select Publisher",
            new { @class = "form-control" })

            @Html.Hidden(
            "PageNumber",
            1,
            new { })

            <input id="submitBtn" type="button" value="Search" class="btn btn-success" />

            <input id="resetBtn" type="reset" value="Clear Form" class="btn btn-danger" />
            <a class="btn btn-info" href="AddBook">Add Book</a>
            <br />
            <br />
            <b class="text-info">Page Size : </b>
            @Html.DropDownList(
           "PageSize",
           new List<SelectListItem> {
               new SelectListItem { Text = "3", Value = "3" },
               new SelectListItem { Text = "5", Value = "5" },
               new SelectListItem { Text = "10", Value = "10" } },
           new { @class = "form-control" })

            <br />
        }

        <label id="msg" style="color:dodgerblue"> </label>

        <div id="partial">

        </div>
    </form>
</div>

<script>
    $(document).ready(function () {
        debugger;
        SearchBtnClick();

        $('ul').on('click', 'li', function () {
            $(this).addClass('active');
        });

        $("#submitBtn").click(function () {
            $("#PageNumber").val(1);
            SearchBtnClick();
        });

        $("body").on("click", "#SelectedPage", function () {
            $("#PageNumber").val($(this).text());
            SearchBtnClick();

        });

        $("body").on("click", "#prev", function () {
            var currentPage = $("#PageNumber").val();
            $("#PageNumber").val(--currentPage);
            SearchBtnClick();
        });

        $("body").on("click", "#next", function () {
            var currentPage = $("#PageNumber").val();
            $("#PageNumber").val(++currentPage);
            SearchBtnClick();
        });

        $("#PageSize").change(function () {
            $("#PageNumber").val(1);
            SearchBtnClick();
        });

        $("#resetBtn").click(function () {
            $("#PageNumber").val(1);
            this.form.reset();
            SearchBtnClick();
        });
        function SearchBtnClick() {

            $.ajax({
                url: "/Books/SearchBook",
                method: "POST",
                data: $("#searchForm").serialize(),

                success: function (data) {
                    $("#partial").html(data);
                }
            });
        }
    });
</script>
